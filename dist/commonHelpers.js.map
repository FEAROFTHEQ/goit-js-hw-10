{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nlet userSelectedDate;\r\nlet now;\r\n\r\nconst input = document.querySelector(\"#datetime-picker\");\r\nconst btn = document.querySelector(\"button[data-start]\");\r\nconst days = document.querySelector(\"span[data-days]\");\r\nconst hours = document.querySelector(\"span[data-hours]\");\r\nconst minutes = document.querySelector(\"span[data-minutes]\");\r\nconst seconds = document.querySelector(\"span[data-seconds]\");\r\n\r\nfunction padNumber(number, length) {\r\n  return number.toString().padStart(length, '0');\r\n}\r\n\r\nconst options = {\r\n    enableTime: true,\r\n    time_24hr: true,\r\n    defaultDate: new Date(),\r\n    minuteIncrement: 1,\r\n    onClose(selectedDates) {\r\n      userSelectedDate = selectedDates[0];\r\n      now = new Date();\r\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n      const checkDate = new Date(userSelectedDate.getFullYear(),userSelectedDate.getMonth(), userSelectedDate.getDate());\r\n      if(checkDate > today){\r\n        btn.removeAttribute(\"disabled\");\r\n        input.removeAttribute(\"disabled\");\r\n        btn.classList.remove(\"disabled-btn\");\r\n      }\r\n      else{\r\n        btn.setAttribute(\"disabled\", \"true\");\r\n        btn.classList.add(\"disabled-btn\");\r\n        iziToast.error({\r\n          title: 'Invalid date',\r\n          message: 'Please choose a date in the future',\r\n          position: 'center',\r\n      });\r\n      }\r\n    },\r\n  };\r\n\r\nflatpickr(input, options);\r\n\r\nfunction convertMs(ms) {\r\n    const second = 1000;\r\n    const minute = second * 60;\r\n    const hour = minute * 60;\r\n    const day = hour * 24;\r\n  \r\n\r\n    const days = Math.floor(ms / day);\r\n    const hours = Math.floor((ms % day) / hour);\r\n    const minutes = Math.floor(((ms % day) % hour) / minute);\r\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n  \r\n    return{\r\n      days: padNumber(days, 2),\r\n      hours: padNumber(hours, 2),\r\n      minutes: padNumber(minutes, 2),\r\n      seconds: padNumber(seconds, 2),\r\n    };\r\n  }\r\n\r\n  \r\nfunction startTimer(){\r\n  if(btn.classList.contains(\"disabled-btn\")){\r\n    return\r\n  }\r\n  btn.classList.add(\"disabled-btn\");\r\n  btn.setAttribute(\"disabled\", \"true\");\r\n  input.setAttribute(\"disabled\", \"true\");\r\n  const intervalId = setInterval(function(){\r\n    now = new Date();\r\n    const timeDifference = userSelectedDate - now;\r\n    if (timeDifference <= 0) {\r\n      clearInterval(intervalId);\r\n      input.removeAttribute(\"disabled\");\r\n    }\r\n    const timeLeft = convertMs(timeDifference);\r\n    days.textContent = timeLeft.days;\r\n    hours.textContent = timeLeft.hours;\r\n    minutes.textContent = timeLeft.minutes;\r\n    seconds.textContent = timeLeft.seconds;\r\n  },1000)\r\n  \r\n  }\r\n  \r\n\r\n\r\n\r\nbtn.addEventListener(\"click\", startTimer);"],"names":["userSelectedDate","now","input","btn","days","hours","minutes","seconds","padNumber","number","length","options","selectedDates","today","iziToast","flatpickr","convertMs","ms","startTimer","intervalId","timeDifference","timeLeft"],"mappings":"2GAKA,IAAIA,EACAC,EAEJ,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,oBAAoB,EACjDC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAE3D,SAASC,EAAUC,EAAQC,EAAQ,CACjC,OAAOD,EAAO,SAAU,EAAC,SAASC,EAAQ,GAAG,CAC/C,CAEA,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBZ,EAAmBY,EAAc,CAAC,EAClCX,EAAM,IAAI,KACV,MAAMY,EAAQ,IAAI,KAAKZ,EAAI,YAAW,EAAIA,EAAI,SAAU,EAAEA,EAAI,QAAS,CAAA,EACrD,IAAI,KAAKD,EAAiB,YAAW,EAAGA,EAAiB,SAAU,EAAEA,EAAiB,QAAS,CAAA,EAClGa,GACbV,EAAI,gBAAgB,UAAU,EAC9BD,EAAM,gBAAgB,UAAU,EAChCC,EAAI,UAAU,OAAO,cAAc,IAGnCA,EAAI,aAAa,WAAY,MAAM,EACnCA,EAAI,UAAU,IAAI,cAAc,EAChCW,EAAS,MAAM,CACb,MAAO,eACP,QAAS,qCACT,SAAU,QACpB,CAAO,EAEF,CACL,EAEAC,EAAUb,EAAOS,CAAO,EAExB,SAASK,EAAUC,EAAI,CAOnB,MAAMb,EAAO,KAAK,MAAMa,EAAK,KAAG,EAC1BZ,EAAQ,KAAK,MAAOY,EAAK,MAAO,IAAI,EACpCX,EAAU,KAAK,MAAQW,EAAK,MAAO,KAAQ,GAAM,EACjDV,EAAU,KAAK,MAASU,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAM,CACJ,KAAMT,EAAUJ,EAAM,CAAC,EACvB,MAAOI,EAAUH,EAAO,CAAC,EACzB,QAASG,EAAUF,EAAS,CAAC,EAC7B,QAASE,EAAUD,EAAS,CAAC,CACnC,CACG,CAGH,SAASW,GAAY,CACnB,GAAGf,EAAI,UAAU,SAAS,cAAc,EACtC,OAEFA,EAAI,UAAU,IAAI,cAAc,EAChCA,EAAI,aAAa,WAAY,MAAM,EACnCD,EAAM,aAAa,WAAY,MAAM,EACrC,MAAMiB,EAAa,YAAY,UAAU,CACvClB,EAAM,IAAI,KACV,MAAMmB,EAAiBpB,EAAmBC,EACtCmB,GAAkB,IACpB,cAAcD,CAAU,EACxBjB,EAAM,gBAAgB,UAAU,GAElC,MAAMmB,EAAWL,EAAUI,CAAc,EACzChB,EAAK,YAAciB,EAAS,KAC5BhB,EAAM,YAAcgB,EAAS,MAC7Bf,EAAQ,YAAce,EAAS,QAC/Bd,EAAQ,YAAcc,EAAS,OAChC,EAAC,GAAI,CAEL,CAKHlB,EAAI,iBAAiB,QAASe,CAAU"}